<!--
  Generated template for the DriverPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
     <button ion-button icon-only clear menuToggle #content class="menuBtn">
      <ion-icon name='menu'></ion-icon>
    </button> 
    <ion-title><i class="{{activeStep.headerIcon}}"></i>{{activeStep.headerTitle}}</ion-title>
  </ion-navbar>

</ion-header>

<ion-menu [content]="content" type="overlay">
  <ion-header>
    <div class="userInfoWrapper">
      <img src="#" class="userPhoto">
      <div class="userInfo">
        <h5 class="userName">{{userInfo?.firstName}} {{userInfo?.lastName}}</h5>
        <div class="driverId" *ngIf="userInfo?.userType == 'driver'">{{userInfo?.driverId}}</div>
      </div>
    </div>
  </ion-header>
  <ion-content>
    <ion-list>
      <button *ngFor="let menu of userMenu" ion-item (click)="openPage(menu.target)">
        <i class={{menu.icon}}></i>
        {{menu.title}}
      </button>
    </ion-list>
  </ion-content>
</ion-menu>

<ion-content>
  <ion-card class="findDirectionCard">
    <ion-card-content class="cardStatus">
      {{activeStep.cardTitle}}
    </ion-card-content>
  </ion-card>

  <ion-card class="findDirectionCard" *ngIf="activeStep.pickupLocation && userInfo?.userType == 'rider'">
    <ion-card-content class="currentContainer">
      <div class="iconSet">
        <i class="fa fa-bullseye"></i>
      </div>
      <div class="searchBox"> 
        <!-- <ion-input type="text" name="currentLocation" [(ngModel)]="CurrentLocation" placeholder="Pickup Location" [(ngModel)]="pickuplocation" (mouseleave) ="checkPickupLocation()"></ion-input> -->
        <ion-input type="text" name="currentLocation" placeholder="Pickup Location" [(ngModel)]="pickuplocation" (mouseleave) ="nextStep()"></ion-input>
      </div>
    </ion-card-content>
    <ion-card-content class="destinationContainer" *ngIf="activeStep.destination">
      <div class="iconSet">
        <i class="fa fa-map-marker"></i>
      </div>
      <div class="searchBox">
        <ion-input type="text" name="destination" placeholder="Destination Address" (mouseleave) ="nextStep()"></ion-input>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-card id="estimateMenu" class="estimateMenu" *ngIf="activeStep.estimateMenu && userInfo?.userType == 'rider'">
    <ion-card-content class="fareEstimateContainer">
      <i class="fa fa-dollar"></i>
      <span class="">Fare Estimates</span>
      <span class="estimatePrice">$77</span>
    </ion-card-content>
    <ion-card-content class="creditCardInfo">
      <i class="{{creditCardIcon(selectedCreditCard.type)}}"></i>
      <span class="creditCardType">{{creditCardName(selectedCreditCard.type)}} Card</span>
      <span class="creditCardNumber">**** {{selectedCreditCard.number}}</span>
      <button ion-button clear class="creditCardChangeBtn" (click)="changeCC()">Change</button>
    </ion-card-content>
    <ion-card-content class="requestDriverContainer">
      <button ion-button full (click)="nextStep()">Request Driver</button>
    </ion-card-content>
  </ion-card>

  <ion-card class="navigation" *ngIf="userInfo?.userType == 'driver'">
    <ion-card-content class="navigation">
      <button ion-button>
        <i class="fa fa-location-arrow"></i>
      </button>
      <div class="address">
        4464 Limelight Ct.<br>
        Annandale, VA 22003
      </div>
    </ion-card-content>
  </ion-card>

  <ion-card id="driverRequest" class="driverRequest" *ngIf="activeStep.driverInfo">
    <ion-card-content class="driverInfo">
      <img src="#" class="userPhoto">
      <div class="userInfo">
        <div class="driverRates">
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
        </div>
        <h5 class="userName">John Doe</h5>
      </div>
      Pick up time is approximately <span class="textFocus">2</span> minutes
    </ion-card-content>
    <ion-card-content class="buttonset">
      <button ion-button full color="dark" outline id="requestDriverCallBtn">Call</button>
      <button ion-button full color="dark" outline id="requestDriverCancelBtn" [disabled]="buttonDisabled" (click)="resetStep()">Cancel</button>
    </ion-card-content>
  </ion-card>

  <ion-card id="pickupContainer" class="pickupContainer" *ngIf="userInfo?.userType == 'driver'">
    <ion-card-content class="driverInfo">
      <div class="leftPanel">
        <ion-row>
          <ion-label color="labelLight" stacked>Pick Up</ion-label>
          John Doe
        </ion-row>
        <ion-row>
          <ion-label color="labelLight" stacked>Car</ion-label>
          2007 Honda Civic EX
        </ion-row>
        <ion-row>
          <ion-label color="labelLight" stacked>Plate No.</ion-label>
          WHD-7712
        </ion-row>
        <ion-row>
          <ion-label color="labelLight" stacked>Estimated Time</ion-label>
          <span class="textFocus">2</span> Min
        </ion-row>
      </div>
      <div class="RightPanel">
        <ion-row>
          <img src="#" class="userPhoto">
        </ion-row>
        <ion-row>
          <button ion-button full><i class="fa fa-phone"></i></button>
        </ion-row>
      </div>
    </ion-card-content>
    <ion-card-content>
      <button ion-button full>Start Trip</button>
    </ion-card-content>
  </ion-card>

  <button ion-button icon-only clear id="currentLocationBtn" class="currentLocationBtn" (click)='getCurrentPosition()'>
    <ion-icon name="ios-locate-outline"></ion-icon>
  </button>
  <div id="map" #map></div>
</ion-content>